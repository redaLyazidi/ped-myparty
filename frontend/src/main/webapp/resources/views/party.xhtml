<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:af="http://xmlns.oracle.com/adf/faces/rich"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
<h:head>

	<meta charset="utf-8" />
	<title>MyParty</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta name="description" content="" />
	<meta name="author" content="" />

	<!-- Le styles -->
	<h:outputStylesheet library="css" name="bootstrap.css" />
	<h:outputStylesheet library="css" name="style.css" />
	<h:outputStylesheet library="css" name="bootstrap-responsive.css" />

</h:head>

<h:body>

<ui:include src="header.xhtml" />

	<div class="container">
		<h:form>
			<div class="row-fluid vueParty">
				<div class="span3 offset1">
					<div class="partyImg">
						<h:graphicImage value="../upload/#{partyBean.accueilBean.partySelect.image}"/>
					</div>
				</div>
				
				<div class="span4" id="blocDescription">
					<div class="partyPartTitle">
						<div class="partyItemTitle">
							<h:outputText value="#{partyBean.accueilBean.partySelect.title}" />
						</div>
						<div class="partyItemArtist">
							<c:forEach var="artist" items="#{partyBean.accueilBean.partySelect.artists}">
								<h:outputText value="#{artist.name}   " />
							</c:forEach>
						</div>
						<div class="partyItemGenre">
							<h:outputText value="#{partyBean.accueilBean.partySelect.theme}" />
						</div>
						<div class="partyItemDate">
							<h:outputText value="#{partyBean.accueilBean.partySelect.dateParty.getTime()}" >
								<f:convertDateTime pattern="dd/MM/yyyy à " timeZone="Europe/Paris" />
							</h:outputText>
														
							<h:outputText value="#{partyBean.accueilBean.partySelect.timeParty.getTime()}">
								<f:convertDateTime pattern="HH:mm" timeZone="Europe/Paris" />
							</h:outputText>
						</div>
					</div>
					<div class="partyPartAdd">
						<div class="partyItemLieu">
							<h:outputText value="#{partyBean.accueilBean.partySelect.place}" />
						</div>
						<div>
							<h:outputText value="#{partyBean.accueilBean.partySelect.street}" />
						</div>
						<h:outputText value="#{partyBean.accueilBean.partySelect.CP} #{partyBean.accueilBean.partySelect.town}" />
					</div>
					<div class="partyPartDesc">
						<h:outputText value="#{partyBean.accueilBean.partySelect.description}" />
					</div>
				</div>
				<div class="span3 offset1" id="blocReservation">
					<div>
						<h:outputText value="#{partyBean.accueilBean.partySelect.price} €" />
					</div>
					<div class="partyNbPlace">
						<h:outputText value="#{partyBean.accueilBean.partySelect.nbPlace - partyBean.accueilBean.partySelect.nbPlaceBought} places restantes" />
					</div>
					<table>
						<tr>
							<td style="padding: 10px">
								<h:commandButton class="btn btn-primary" value="Réservez" ajax="false" action="reserveParty" disabled="#{partyBean.disableBuyButton}"/>
							</td>
						</tr>
						<c:choose>
							<c:when test="#{partyBean.dateCourante.before(partyBean.accueilBean.partySelect.dateBegin)}">
								<tr>
									<td style="padding: 10px">
										<h:commandButton class="btn btn-warning" value="Modifier" ajax="false" action="#{partyBean.buyTicket}" rendered="#{loginBean.userAdmin}"/>
									</td>
								</tr>
								<tr>
									<td style="padding: 10px">
										<h:commandButton class="btn btn-warning" value="Supprimer" ajax="false" action="#{partyBean.deleteParty}" rendered="#{loginBean.userAdmin}"/>
									</td>
								</tr>
							</c:when>
							<c:otherwise>
								<tr>
									<td><span class="label label-warning">Vous ne pouvez pas éditer la Party</span></td>
								</tr>
								<tr>
									<td><span class="label label-warning">les préventes ont commencées</span></td>
								</tr>
							</c:otherwise>
						</c:choose>
					</table>
					
				</div>
			</div>
		</h:form>
	</div>
	
	<!-- Bootstrap -->
	<h:outputScript library="js" name="bootstrap.min.js" />

</h:body>
</html>